-- AROX MEGA CHAOS SPAM - MAXIMUM POWER
-- Services
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Active spam sessions
local activeSpams = {}
local spamAllActive = false

-- MEGA POWER Command Functions
local function megaRocket(targetPlayer)
    if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
        spawn(function()
            pcall(function()
                -- MEGA ROCKET POWER
                for i = 1, 5 do
                    local bodyVelocity = Instance.new("BodyVelocity")
                    bodyVelocity.MaxForce = Vector3.new(10000, 10000, 10000)
                    bodyVelocity.Velocity = Vector3.new(math.random(-50, 50), 200, math.random(-50, 50))
                    bodyVelocity.Parent = targetPlayer.Character.HumanoidRootPart
                    
                    local explosion = Instance.new("Explosion")
                    explosion.Position = targetPlayer.Character.HumanoidRootPart.Position
                    explosion.BlastRadius = 50
                    explosion.BlastPressure = 1000000
                    explosion.Parent = workspace
                    
                    local fire = Instance.new("Fire")
                    fire.Size = 30
                    fire.Heat = 50
                    fire.Color = Color3.new(1, 0, 0)
                    fire.Parent = targetPlayer.Character.HumanoidRootPart
                    
                    game:GetService("Debris"):AddItem(bodyVelocity, 0.3)
                    game:GetService("Debris"):AddItem(fire, 0.3)
                    wait(0.1)
                end
            end)
        end)
    end
end

local function megaRagdoll(targetPlayer)
    if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("Humanoid") then
        spawn(function()
            pcall(function()
                local humanoid = targetPlayer.Character.Humanoid
                humanoid.PlatformStand = true
                humanoid.Sit = true
                
                -- MEGA CHAOS - All body parts go crazy
                for _, part in pairs(targetPlayer.Character:GetChildren()) do
                    if part:IsA("BasePart") then
                        for j = 1, 3 do
                            local bodyVelocity = Instance.new("BodyVelocity")
                            bodyVelocity.MaxForce = Vector3.new(8000, 8000, 8000)
                            bodyVelocity.Velocity = Vector3.new(math.random(-100, 100), math.random(-100, 100), math.random(-100, 100))
                            bodyVelocity.Parent = part
                            
                            local bodyAngularVelocity = Instance.new("BodyAngularVelocity")
                            bodyAngularVelocity.MaxTorque = Vector3.new(5000, 5000, 5000)
                            bodyAngularVelocity.AngularVelocity = Vector3.new(math.random(-50, 50), math.random(-50, 50), math.random(-50, 50))
                            bodyAngularVelocity.Parent = part
                            
                            game:GetService("Debris"):AddItem(bodyVelocity, 0.2)
                            game:GetService("Debris"):AddItem(bodyAngularVelocity, 0.2)
                        end
                    end
                end
                
                wait(0.2)
                if targetPlayer.Character and targetPlayer.Character:FindFirstChild("Humanoid") then
                    humanoid.PlatformStand = false
                    humanoid.Sit = false
                end
            end)
        end)
    end
end

local function megaBalloon(targetPlayer)
    if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("Head") then
        spawn(function()
            pcall(function()
                -- MEGA BALLOONS - 10 giant balloons
                for i = 1, 10 do
                    local balloon = Instance.new("Part")
                    balloon.Name = "MegaBalloon" .. i
                    balloon.Size = Vector3.new(8, 8, 8)
                    balloon.Shape = Enum.PartType.Ball
                    balloon.Material = Enum.Material.ForceField
                    balloon.Color = Color3.fromHSV(i/10, 1, 1)
                    balloon.CanCollide = false
                    balloon.Parent = targetPlayer.Character
                    
                    local weld = Instance.new("WeldConstraint")
                    weld.Part0 = balloon
                    weld.Part1 = targetPlayer.Character.Head
                    weld.Parent = balloon
                    
                    local bodyVelocity = Instance.new("BodyVelocity")
                    bodyVelocity.MaxForce = Vector3.new(8000, 8000, 8000)
                    bodyVelocity.Velocity = Vector3.new(math.random(-20, 20), 80, math.random(-20, 20))
                    bodyVelocity.Parent = targetPlayer.Character.HumanoidRootPart
                    
                    -- Add spinning effect
                    local spin = Instance.new("BodyAngularVelocity")
                    spin.MaxTorque = Vector3.new(5000, 5000, 5000)
                    spin.AngularVelocity = Vector3.new(math.random(-30, 30), math.random(-30, 30), math.random(-30, 30))
                    spin.Parent = balloon
                    
                    game:GetService("Debris"):AddItem(balloon, 1.5)
                    game:GetService("Debris"):AddItem(bodyVelocity, 1.5)
                    game:GetService("Debris"):AddItem(spin, 1.5)
                end
            end)
        end)
    end
end

local function megaMorph(targetPlayer)
    if targetPlayer and targetPlayer.Character then
        spawn(function()
            pcall(function()
                -- MEGA RAINBOW CHAOS
                for i = 1, 30 do
                    for _, part in pairs(targetPlayer.Character:GetChildren()) do
                        if part:IsA("BasePart") then
                            part.Color = Color3.fromHSV(math.random(), 1, 1)
                            part.Material = Enum.Material.ForceField
                            part.Transparency = math.random(0, 0.5)
                            
                            -- Add glow effect
                            local pointLight = Instance.new("PointLight")
                            pointLight.Color = part.Color
                            pointLight.Brightness = 10
                            pointLight.Range = 20
                            pointLight.Parent = part
                            
                            game:GetService("Debris"):AddItem(pointLight, 0.1)
                        end
                    end
                    wait(0.03)
                end
                
                -- Reset
                for _, part in pairs(targetPlayer.Character:GetChildren()) do
                    if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                        part.Color = Color3.new(0.7, 0.7, 0.7)
                        part.Material = Enum.Material.Plastic
                        part.Transparency = 0
                    end
                end
            end)
        end)
    end
end

local function megaJail(targetPlayer)
    if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
        spawn(function()
            pcall(function()
                -- MEGA PRISON
                targetPlayer.Character.HumanoidRootPart.Anchored = true
                
                local jailModel = Instance.new("Model")
                jailModel.Name = "MegaJail"
                jailModel.Parent = workspace
                
                local center = targetPlayer.Character.HumanoidRootPart.Position
                
                -- Create massive jail with multiple layers
                for layer = 1, 3 do
                    for i = 1, 16 do
                        local bar = Instance.new("Part")
                        bar.Size = Vector3.new(2, 20, 2)
                        bar.Material = Enum.Material.ForceField
                        bar.Color = Color3.fromHSV(i/16, 1, 1)
                        bar.CanCollide = true
                        bar.Anchored = true
                        
                        local angle = (i - 1) * (math.pi * 2 / 16)
                        local radius = 6 + layer * 2
                        bar.Position = center + Vector3.new(math.cos(angle) * radius, 0, math.sin(angle) * radius)
                        bar.Parent = jailModel
                        
                        -- Add spinning effect
                        spawn(function()
                            for j = 1, 50 do
                                bar.CFrame = bar.CFrame * CFrame.Angles(0, math.rad(5), 0)
                                wait(0.05)
                            end
                        end)
                    end
                end
                
                -- Create roof and floor
                local roof = Instance.new("Part")
                roof.Size = Vector3.new(25, 3, 25)
                roof.Material = Enum.Material.ForceField
                roof.Color = Color3.new(1, 0, 0)
                roof.CanCollide = true
                roof.Anchored = true
                roof.Position = center + Vector3.new(0, 12, 0)
                roof.Parent = jailModel
                
                local floor = Instance.new("Part")
                floor.Size = Vector3.new(25, 3, 25)
                floor.Material = Enum.Material.ForceField
                floor.Color = Color3.new(1, 0, 0)
                floor.CanCollide = true
                floor.Anchored = true
                floor.Position = center + Vector3.new(0, -12, 0)
                floor.Parent = jailModel
                
                wait(2)
                if jailModel then jailModel:Destroy() end
                if targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    targetPlayer.Character.HumanoidRootPart.Anchored = false
                end
            end)
        end)
    end
end

local function megaTeleport(targetPlayer)
    if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
        spawn(function()
            pcall(function()
                -- MEGA TELEPORT CHAOS
                for i = 1, 15 do
                    local currentPos = targetPlayer.Character.HumanoidRootPart.Position
                    local newPos = currentPos + Vector3.new(math.random(-30, 30), math.random(-10, 20), math.random(-30, 30))
                    
                    -- Create teleport effect
                    local teleportEffect = Instance.new("Explosion")
                    teleportEffect.Position = currentPos
                    teleportEffect.BlastRadius = 20
                    teleportEffect.BlastPressure = 0
                    teleportEffect.Parent = workspace
                    
                    targetPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(newPos)
                    
                    local arrivalEffect = Instance.new("Explosion")
                    arrivalEffect.Position = newPos
                    arrivalEffect.BlastRadius = 20
                    arrivalEffect.BlastPressure = 0
                    arrivalEffect.Parent = workspace
                    
                    wait(0.05)
                end
            end)
        end)
    end
end

local function megaSize(targetPlayer)
    if targetPlayer and targetPlayer.Character then
        spawn(function()
            pcall(function()
                -- MEGA SIZE CHAOS - Rapid size changes
                for i = 1, 20 do
                    local scale = math.random(0.1, 3)
                    for _, part in pairs(targetPlayer.Character:GetChildren()) do
                        if part:IsA("BasePart") then
                            local originalSize = part.Size
                            part.Size = originalSize * scale
                        end
                    end
                    wait(0.1)
                end
                
                -- Reset to normal
                for _, part in pairs(targetPlayer.Character:GetChildren()) do
                    if part:IsA("BasePart") and part.Name == "HumanoidRootPart" then
                        -- Reset based on HumanoidRootPart
                    end
                end
            end)
        end)
    end
end

local function megaFling(targetPlayer)
    if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
        spawn(function()
            pcall(function()
                -- MEGA FLING - Multiple directions
                for i = 1, 8 do
                    local bodyVelocity = Instance.new("BodyVelocity")
                    bodyVelocity.MaxForce = Vector3.new(15000, 15000, 15000)
                    
                    local angle = (i - 1) * (math.pi * 2 / 8)
                    bodyVelocity.Velocity = Vector3.new(math.cos(angle) * 150, 100, math.sin(angle) * 150)
                    bodyVelocity.Parent = targetPlayer.Character.HumanoidRootPart
                    
                    game:GetService("Debris"):AddItem(bodyVelocity, 0.2)
                    wait(0.1)
                end
            end)
        end)
    end
end

-- MEGA commands array
local megaCommands = {megaRocket, megaRagdoll, megaBalloon, megaMorph, megaJail, megaTeleport, megaSize, megaFling}

-- MEGA CHAOS Spam function
local function megaSpamPlayer(targetPlayer)
    if activeSpams[targetPlayer.UserId] then
        return
    end
    
    activeSpams[targetPlayer.UserId] = true
    
    spawn(function()
        while activeSpams[targetPlayer.UserId] and targetPlayer.Parent do
            -- Execute ALL MEGA commands simultaneously
            for _, cmd in pairs(megaCommands) do
                spawn(function()
                    cmd(targetPlayer)
                end)
            end
            
            wait(0.02) -- INSANE SPEED - 50 times per second
        end
    end)
end

-- Stop spam function
local function stopSpamPlayer(targetPlayer)
    activeSpams[targetPlayer.UserId] = false
end

-- MEGA Spam All function
local function megaSpamAllPlayers()
    spamAllActive = true
    for _, p in pairs(Players:GetPlayers()) do
        megaSpamPlayer(p)
    end
end

-- Stop All function
local function stopAllSpam()
    spamAllActive = false
    for userId, _ in pairs(activeSpams) do
        activeSpams[userId] = false
    end
end

-- Create MEGA CHAOS GUI
local function createMegaChaosGUI()
    if playerGui:FindFirstChild("AroxMegaChaos") then
        playerGui:FindFirstChild("AroxMegaChaos"):Destroy()
    end

    local spamGui = Instance.new("ScreenGui")
    spamGui.Name = "AroxMegaChaos"
    spamGui.ResetOnSpawn = false
    spamGui.Parent = playerGui

    -- Main Frame with MEGA style
    local mainFrame = Instance.new("Frame")
    mainFrame.Size = UDim2.new(0, 450, 0, 400)
    mainFrame.Position = UDim2.new(0.5, -225, 0.5, -200)
    mainFrame.BackgroundColor3 = Color3.new(0.05, 0.05, 0.05)
    mainFrame.BorderSizePixel = 0
    mainFrame.Parent = spamGui

    local mainCorner = Instance.new("UICorner")
    mainCorner.CornerRadius = UDim.new(0, 15)
    mainCorner.Parent = mainFrame

    -- MEGA glow border (animated)
    local glowFrame = Instance.new("Frame")
    glowFrame.Size = UDim2.new(1, 8, 1, 8)
    glowFrame.Position = UDim2.new(0, -4, 0, -4)
    glowFrame.BackgroundColor3 = Color3.new(1, 0, 0)
    glowFrame.BorderSizePixel = 0
    glowFrame.Parent = mainFrame
    glowFrame.ZIndex = mainFrame.ZIndex - 1

    local glowCorner = Instance.new("UICorner")
    glowCorner.CornerRadius = UDim.new(0, 19)
    glowCorner.Parent = glowFrame

    -- Animate glow
    spawn(function()
        while glowFrame.Parent do
            for i = 0, 1, 0.1 do
                glowFrame.BackgroundColor3 = Color3.fromHSV(i, 1, 1)
                wait(0.1)
            end
        end
    end)

    -- Title Bar
    local titleBar = Instance.new("Frame")
    titleBar.Size = UDim2.new(1, 0, 0, 70)
    titleBar.Position = UDim2.new(0, 0, 0, 0)
    titleBar.BackgroundColor3 = Color3.new(0.02, 0.02, 0.02)
    titleBar.BorderSizePixel = 0
    titleBar.Parent = mainFrame

    local titleCorner = Instance.new("UICorner")
    titleCorner.CornerRadius = UDim.new(0, 15)
    titleCorner.Parent = titleBar

    local titleFix = Instance.new("Frame")
    titleFix.Size = UDim2.new(1, 0, 0, 35)
    titleFix.Position = UDim2.new(0, 0, 0.5, 0)
    titleFix.BackgroundColor3 = Color3.new(0.02, 0.02, 0.02)
    titleFix.BorderSizePixel = 0
    titleFix.Parent = titleBar

    -- MEGA Title
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, -10, 0, 40)
    title.Position = UDim2.new(0, 10, 0, 5)
    title.BackgroundTransparency = 1
    title.Text = "üí• MEGA CHAOS SPAM üí•"
    title.TextColor3 = Color3.new(1, 0.2, 0.2)
    title.TextSize = 24
    title.Font = Enum.Font.GothamBold
    title.TextXAlignment = Enum.TextXAlignment.Left
    title.Parent = titleBar

    -- Subtitle
    local subtitle = Instance.new("TextLabel")
    subtitle.Size = UDim2.new(1, -10, 0, 25)
    subtitle.Position = UDim2.new(0, 10, 1, -30)
    subtitle.BackgroundTransparency = 1
    subtitle.Text = "by AROX - 50 COMMANDS/SEC - MAXIMUM POWER"
    subtitle.TextColor3 = Color3.new(1, 0.8, 0)
    subtitle.TextSize = 14
    subtitle.Font = Enum.Font.Gotham
    subtitle.TextXAlignment = Enum.TextXAlignment.Left
    subtitle.Parent = titleBar

    -- Close Button
    local closeBtn = Instance.new("TextButton")
    closeBtn.Size = UDim2.new(0, 40, 0, 40)
    closeBtn.Position = UDim2.new(1, -45, 0, 15)
    closeBtn.BackgroundColor3 = Color3.new(1, 0, 0)
    closeBtn.BorderSizePixel = 0
    closeBtn.Text = "‚úï"
    closeBtn.TextColor3 = Color3.new(1, 1, 1)
    closeBtn.TextSize = 20
    closeBtn.Font = Enum.Font.GothamBold
    closeBtn.Parent = titleBar

    local closeBtnCorner = Instance.new("UICorner")
    closeBtnCorner.CornerRadius = UDim.new(0, 10)
    closeBtnCorner.Parent = closeBtn

    closeBtn.MouseButton1Click:Connect(function()
        stopAllSpam()
        spamGui:Destroy()
    end)

    -- MEGA Controls
    local controlsFrame = Instance.new("Frame")
    controlsFrame.Size = UDim2.new(1, -20, 0, 70)
    controlsFrame.Position = UDim2.new(0, 10, 0, 80)
    controlsFrame.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
    controlsFrame.BorderSizePixel = 0
    controlsFrame.Parent = mainFrame

    local controlsCorner = Instance.new("UICorner")
    controlsCorner.CornerRadius = UDim.new(0, 12)
    controlsCorner.Parent = controlsFrame

    -- MEGA Spam All Button
    local megaSpamAllBtn = Instance.new("TextButton")
    megaSpamAllBtn.Size = UDim2.new(0.48, 0, 0, 50)
    megaSpamAllBtn.Position = UDim2.new(0.02, 0, 0.5, -25)
    megaSpamAllBtn.BackgroundColor3 = Color3.new(1, 0.1, 0.1)
    megaSpamAllBtn.BorderSizePixel = 0
    megaSpamAllBtn.Text = "üí• MEGA CHAOS ALL"
    megaSpamAllBtn.TextColor3 = Color3.new(1, 1, 1)
    megaSpamAllBtn.TextSize = 16
    megaSpamAllBtn.Font = Enum.Font.GothamBold
    megaSpamAllBtn.Parent = controlsFrame

    local megaSpamAllCorner = Instance.new("UICorner")
    megaSpamAllCorner.CornerRadius = UDim.new(0, 10)
    megaSpamAllCorner.Parent = megaSpamAllBtn

    -- MEGA Stop All Button
    local megaStopAllBtn = Instance.new("TextButton")
    megaStopAllBtn.Size = UDim2.new(0.48, 0, 0, 50)
    megaStopAllBtn.Position = UDim2.new(0.5, 0, 0.5, -25)
    megaStopAllBtn.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
    megaStopAllBtn.BorderSizePixel = 0
    megaStopAllBtn.Text = "‚èπÔ∏è STOP CHAOS"
    megaStopAllBtn.TextColor3 = Color3.new(1, 1, 1)
    megaStopAllBtn.TextSize = 16
    megaStopAllBtn.Font = Enum.Font.GothamBold
    megaStopAllBtn.Parent = controlsFrame

    local megaStopAllCorner = Instance.new("UICorner")
    megaStopAllCorner.CornerRadius = UDim.new(0, 10)
    megaStopAllCorner.Parent = megaStopAllBtn

    -- MEGA Spam All Button Click
    megaSpamAllBtn.MouseButton1Click:Connect(function()
        if not spamAllActive then
            megaSpamAllPlayers()
            megaSpamAllBtn.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
            megaSpamAllBtn.Text = "üí• CHAOS ACTIVE"
            megaStopAllBtn.BackgroundColor3 = Color3.new(1, 0.1, 0.1)
        end
    end)

    -- MEGA Stop All Button Click
    megaStopAllBtn.MouseButton1Click:Connect(function()
        stopAllSpam()
        megaSpamAllBtn.BackgroundColor3 = Color3.new(1, 0.1, 0.1)
        megaSpamAllBtn.Text = "üí• MEGA CHAOS ALL"
        megaStopAllBtn.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
    end)

    -- Player List Scroll
    local playerListScroll = Instance.new("ScrollingFrame")
    playerListScroll.Size = UDim2.new(1, -20, 1, -170)
    playerListScroll.Position = UDim2.new(0, 10, 0, 160)
    playerListScroll.BackgroundTransparency = 1
    playerListScroll.ScrollBarThickness = 12
    playerListScroll.ScrollBarImageColor3 = Color3.new(1, 0, 0)
    playerListScroll.Parent = mainFrame

    -- Update Player List Function
    local function updatePlayerList()
        for _, child in pairs(playerListScroll:GetChildren()) do
            if child:IsA("Frame") then
                child:Destroy()
            end
        end

        local yPos = 0
        for _, p in pairs(Players:GetPlayers()) do
            -- Player Frame
            local playerFrame = Instance.new("Frame")
            playerFrame.Size = UDim2.new(1, -15, 0, 70)
            playerFrame.Position = UDim2.new(0, 5, 0, yPos)
            playerFrame.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
            playerFrame.BorderSizePixel = 0
            playerFrame.Parent = playerListScroll

            local playerFrameCorner = Instance.new("UICorner")
            playerFrameCorner.CornerRadius = UDim.new(0, 12)
            playerFrameCorner.Parent = playerFrame

            -- Player Avatar
            local avatarFrame = Instance.new("Frame")
            avatarFrame.Size = UDim2.new(0, 50, 0, 50)
            avatarFrame.Position = UDim2.new(0, 10, 0.5, -25)
            avatarFrame.BackgroundColor3 = Color3.new(0.15, 0.15, 0.15)
            avatarFrame.BorderSizePixel = 0
            avatarFrame.Parent = playerFrame

            local avatarCorner = Instance.new("UICorner")
            avatarCorner.CornerRadius = UDim.new(0.5, 0)
            avatarCorner.Parent = avatarFrame

            -- Animated border
            local borderFrame = Instance.new("Frame")
            borderFrame.Size = UDim2.new(1, 6, 1, 6)
            borderFrame.Position = UDim2.new(0, -3, 0, -3)
            borderFrame.BackgroundColor3 = p == player and Color3.new(0, 1, 0) or Color3.new(1, 0, 0)
            borderFrame.BorderSizePixel = 0
            borderFrame.Parent = avatarFrame
            borderFrame.ZIndex = avatarFrame.ZIndex - 1

            local borderCorner = Instance.new("UICorner")
            borderCorner.CornerRadius = UDim.new(0.5, 0)
            borderCorner.Parent = borderFrame

            -- Avatar Image
            local avatarImg = Instance.new("ImageLabel")
            avatarImg.Size = UDim2.new(1, 0, 1, 0)
            avatarImg.BackgroundTransparency = 1
            avatarImg.Image = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. p.UserId .. "&width=420&height=420&format=png"
            avatarImg.Parent = avatarFrame

            local avatarImgCorner = Instance.new("UICorner")
            avatarImgCorner.CornerRadius = UDim.new(0.5, 0)
            avatarImgCorner.Parent = avatarImg

            -- Status Label
            local statusLabel = Instance.new("TextLabel")
            statusLabel.Size = UDim2.new(0, 80, 0, 25)
            statusLabel.Position = UDim2.new(0, 70, 0, 10)
            statusLabel.BackgroundColor3 = p == player and Color3.new(0, 0.8, 0) or Color3.new(1, 0.2, 0.2)
            statusLabel.BorderSizePixel = 0
            statusLabel.Text = p == player and "You" or "Target"
            statusLabel.TextColor3 = Color3.new(1, 1, 1)
            statusLabel.TextSize = 14
            statusLabel.Font = Enum.Font.GothamBold
            statusLabel.Parent = playerFrame

            local statusCorner = Instance.new("UICorner")
            statusCorner.CornerRadius = UDim.new(0, 6)
            statusCorner.Parent = statusLabel

            -- Player Name
            local nameLabel = Instance.new("TextLabel")
            nameLabel.Size = UDim2.new(0, 250, 0, 30)
            nameLabel.Position = UDim2.new(0, 70, 0, 35)
            nameLabel.BackgroundTransparency = 1
            nameLabel.Text = p.Name
            nameLabel.TextColor3 = Color3.new(1, 1, 1)
            nameLabel.TextSize = 20
            nameLabel.Font = Enum.Font.GothamBold
            nameLabel.TextXAlignment = Enum.TextXAlignment.Left
            nameLabel.Parent = playerFrame

            -- MEGA Spam Button
            local megaSpamBtn = Instance.new("TextButton")
            megaSpamBtn.Size = UDim2.new(0, 100, 0, 45)
            megaSpamBtn.Position = UDim2.new(1, -110, 0.5, -22.5)
            megaSpamBtn.BackgroundColor3 = activeSpams[p.UserId] and Color3.new(1, 0, 0) or Color3.new(1, 0.2, 0.2)
            megaSpamBtn.BorderSizePixel = 0
            megaSpamBtn.Text = activeSpams[p.UserId] and "‚èπÔ∏è STOP" or "üí• MEGA"
            megaSpamBtn.TextColor3 = Color3.new(1, 1, 1)
            megaSpamBtn.TextSize = 14
            megaSpamBtn.Font = Enum.Font.GothamBold
            megaSpamBtn.Parent = playerFrame

            local megaSpamBtnCorner = Instance.new("UICorner")
            megaSpamBtnCorner.CornerRadius = UDim.new(0, 10)
            megaSpamBtnCorner.Parent = megaSpamBtn

            -- MEGA Spam Button Click
            megaSpamBtn.MouseButton1Click:Connect(function()
                if activeSpams[p.UserId] then
                    stopSpamPlayer(p)
                    megaSpamBtn.Text = "üí• MEGA"
                    megaSpamBtn.BackgroundColor3 = Color3.new(1, 0.2, 0.2)
                else
                    megaSpamPlayer(p)
                    megaSpamBtn.Text = "‚èπÔ∏è STOP"
                    megaSpamBtn.BackgroundColor3 = Color3.new(1, 0, 0)
                end
            end)

            yPos = yPos + 80
        end
        
        playerListScroll.CanvasSize = UDim2.new(0, 0, 0, yPos)
    end

    -- Initial setup
    updatePlayerList()
    
    -- Update when players join/leave
    Players.PlayerAdded:Connect(function()
        wait(1)
        updatePlayerList()
    end)
    
    Players.PlayerRemoving:Connect(function()
        wait(1)
        updatePlayerList()
    end)

    -- Make draggable
    local titleDragging = false
    local dragStart = nil
    local startPos = nil

    titleBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            titleDragging = true
            dragStart = input.Position
            startPos = mainFrame.Position
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if titleDragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)

    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            titleDragging = false
        end
    end)
end

-- Start the MEGA CHAOS GUI
createMegaChaosGUI()
